<!DOCTYPE html>
<html lang="de">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Klartext Kamera</title>
    <link rel="stylesheet" href="index.css" />
    <script type="module" src="i18n.ts"></script>
    <script type="module" src="index.tsx"></script>
</head>
  <body>
    <script>
      try {
        const ok = sessionStorage.getItem('auth_ok');
        if (!ok) {
          window.location.replace('login.html');
        }
      } catch (e) { /* ignore */ }
    </script>
    <div id="app">
      <header>
        <button id="lang-toggle" style="position:absolute;top:1rem;left:50%;transform:translateX(-50%);padding:0.5rem 1rem;border:1px solid #d1d5db;border-radius:6px;background:#f9fafb;cursor:pointer;font-weight:600;z-index:1000">RU</button>
        <h1>
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor" class="header-icon">
            <path d="M12 1a9 9 0 0 0-9 9c0 2.38 1.005 4.545 2.636 6.065L4.2 18.3a1 1 0 0 0 .135 1.404l.06.05.06.05a1 1 0 0 0 1.404-.135L7.935 18.2A8.994 8.994 0 0 0 21 10a9 9 0 0 0-9-9zm0 2a7 7 0 0 1 7 7c0 3.12-2.015 5.76-4.805 6.645a.5.5 0 0 0-.195.955l.63 1.575a6.992 6.992 0 0 1-5.26 0l.63-1.575a.5.5 0 0 0-.195-.955A6.978 6.978 0 0 1 5 10a7 7 0 0 1 7-7zM8 9a1 1 0 0 0-1 1v.5a1 1 0 0 0 2 0V10a1 1 0 0 0-1-1zm8 0a1 1 0 0 0-1 1v.5a1 1 0 0 0 2 0V10a1 1 0 0 0-1-1zm-4 2a2.5 2.5 0 0 0-2.5 2.5A2.5 2.5 0 0 0 12 16a2.5 2.5 0 0 0 2.5-2.5A2.5 2.5 0 0 0 12 13z"/>
          </svg>
          <span data-i18n="app_title">Klartext Kamera</span>
        </h1>
        <p data-i18n="app_subtitle">Komplexe Texte fotografieren und sofort verständlich erklärt bekommen.</p>
      </header>
      <main>
        <div class="upload-container">
          <label for="image-upload" class="upload-label" aria-label="Upload or take a picture">
            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor" class="icon"><path d="M21 19V5c0-1.1-.9-2-2-2H5c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2zM8.5 13.5l2.5 3.01L14.5 12l4.5 6H5l3.5-4.5z"/></svg>
            <span data-i18n="upload_label">Bild hochladen / Foto aufnehmen</span>
          </label>
          <input type="file" id="image-upload" accept="image/*" hidden />
          <div id="image-preview-container" class="hidden">
            <img id="image-preview" alt="Vorschau des hochgeladenen Bildes" />
            <button id="remove-image-btn" aria-label="Remove image">&times;</button>
          </div>
        </div>

        <div class="controls">
          <div class="control-group">
            <label for="style-select" data-i18n="style_label">Zielgruppe/Stil</label>
            <select id="style-select">
              <option value="Wichtigste Kernaussagen" data-i18n="style_key_points">Wichtigste Kernaussagen</option>
              <option value="Einfache Zusammenfassung" data-i18n="style_simple_summary">Einfache Zusammenfassung</option>
            </select>
          </div>
          <div class="control-group">
            <label for="lang-select" data-i18n="language_label">Ausgabesprache</label>
            <select id="lang-select">
              <option value="Deutsch" data-i18n="lang_german">Deutsch</option>
              <option value="English" data-i18n="lang_english">English</option>
              <option value="Русский" data-i18n="lang_russian">Русский</option>
            </select>
          </div>
        </div>

        <button id="analyze-btn" disabled>
          <span class="btn-text" data-i18n="analyze_button">Analysieren</span>
          <div class="loader hidden"></div>
        </button>

        <div id="result-container">
          <div class="result-header">
            <h2 data-i18n="result_title">Ergebnis</h2>
            <div class="result-actions">
              <button id="read-aloud-btn" class="hidden" aria-label="Read result aloud">
                <svg class="speaker-icon" xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" viewBox="0 0 16 16">
                  <path d="M11.536 14.01A8.473 8.473 0 0 0 14.026 8a8.473 8.473 0 0 0-2.49-6.01l-1.414 1.414A6.472 6.472 0 0 1 12.026 8c0 1.966-.893 3.738-2.348 4.885l1.414 1.414z"/>
                  <path d="M10.121 12.596A6.48 6.48 0 0 0 12.026 8a6.48 6.48 0 0 0-1.905-4.596l-1.414 1.414A4.486 4.486 0 0 1 10.026 8c0 1.353-.6 2.544-1.564 3.362l1.414 1.414z"/>
                  <path d="M8.707 11.182A4.486 4.486 0 0 0 10.026 8a4.486 4.486 0 0 0-1.319-3.182L8.707 6.232A2.486 2.486 0 0 1 9.026 8c0 .638-.244 1.21-.638 1.664l.319.318z"/>
                  <path d="M6.717 3.55A.5.5 0 0 1 7 4v8a.5.5 0 0 1-.812.39L3.825 10.5H1.5A.5.5 0 0 1 1 10V6a.5.5 0 0 1 .5-.5h2.325l2.363-1.89a.5.5 0 0 1 .529-.06z"/>
                </svg>
                <svg class="stop-icon hidden" xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" viewBox="0 0 16 16">
                  <path d="M5 3.5h6A1.5 1.5 0 0 1 12.5 5v6a1.5 1.5 0 0 1-1.5 1.5H5A1.5 1.5 0 0 1 3.5 11V5A1.5 1.5 0 0 1 5 3.5"/>
                </svg>
                <span class="read-aloud-btn-text" data-i18n="read_aloud">Vorlesen</span>
              </button>
              <button id="copy-btn" class="hidden" aria-label="Copy result text">
                <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" viewBox="0 0 16 16">
                  <path d="M4 1.5H3a2 2 0 0 0-2 2V14a2 2 0 0 0 2 2h10a2 2 0 0 0 2-2V3.5a2 2 0 0 0-2-2h-1v1h1a1 1 0 0 1 1 1V14a1 1 0 0 1-1 1H3a1 1 0 0 1-1-1V3.5a1 1 0 0 1 1-1h1v-1z"/>
                  <path d="M9.5 1a.5.5 0 0 1 .5.5v1a.5.5 0 0 1-.5.5h-3a.5.5 0 0 1-.5-.5v-1a.5.5 0 0 1 .5-.5h3zM-1 2A1.5 1.5 0 0 1 .5 3.5V5h1V3.5a.5.5 0 0 0-.5-.5h-1zM8 1.5A1.5 1.5 0 0 1 6.5 0h3A1.5 1.5 0 0 1 11 1.5v1A1.5 1.5 0 0 1 9.5 4h-3A1.5 1.5 0 0 1 5 2.5v-1z"/>
                </svg>
                <span class="copy-btn-text" data-i18n="copy_button">Kopieren</span>
              </button>
            </div>
          </div>
          <p id="result-text" aria-live="polite" data-i18n="result_placeholder">Das Ergebnis der Analyse wird hier angezeigt.</p>
          <p id="error-text" class="hidden" aria-live="assertive"></p>
        </div>
      </main>
    </div>
  <script type="module" src="index.tsx"></script>
</body>
</html>